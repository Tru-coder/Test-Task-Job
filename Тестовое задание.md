# Интеграция систем
## **Задача №1**

Вам на аналитику дали задачу, цель которой провести интеграцию интернет-магазина с сервисом контрагентов. В сервисе содержится информация о контрагентах компании.

Кратко опишите Вашу последовательность действий при планировании работы над задачей до выкладки. Результатом выполнения задания является общий план, состоящий из не менее 7 пунктов.

### Решение
1. Изучение требований: Начну с тщательного изучения требований к интеграции интернет-магазина с сервисом контрагентов. Необходимо понять, какая информация должна передаваться между системами, какие операции необходимо поддерживать и какие аутентификационные механизмы и протоколы использовать.
    
2. Анализ API сервиса контрагентов: Проведу детальный анализ API сервиса контрагентов, оценив его возможности, ограничения, и степень соответствия с требованиями интернет-магазина. Это позволит понять, какие операции и запросы необходимо отправлять, и как обрабатывать полученные данные.
    
3. Оценка безопасности: Проведу оценку безопасности интеграции, включая аутентификацию, авторизацию, защиту данных и обработку ошибок. Необходимо обеспечить безопасность передаваемой информации и защиту от возможных атак.
    
4. Выбор технологий: На основе требований и анализа API выберу наиболее подходящие технологии и инструменты для реализации интеграции. Это может включать выбор методов передачи данных, форматов обмена, языков программирования и библиотек.
    
5. Разработка протокола интеграции: На основе предыдущих этапов разработаю протокол интеграции, определив форматы запросов и ответов, механизмы обработки ошибок, соглашения об аутентификации и другие важные детали.
    
6. Тестирование: Создам тестовые сценарии для проверки работоспособности интеграции, включая позитивные и негативные тесты, тесты безопасности и производительности. Необходимо удостовериться, что интеграция работает как ожидается и безопасно обрабатывает данные.
    
7. Документация: Напишу подробную документацию по интеграции, включая описание API, инструкции по использованию, сведения о безопасности, конфигурации и примеры запросов и ответов. Документация поможет другим разработчикам понять и использовать интеграцию.
    
8. Развертывание и поддержка: Подготовлю процесс развертывания интеграции в рабочей среде и обеспечу необходимую поддержку для пользователей. Это включает в себя мониторинг работы интеграции, устранение возможных проблем и обновление функциональности по мере необходимости.

## **Задача №2**

Задача провести интеграцию двух систем. По данным системы №1 необходимо заполнить справочник “Контрагенты”  в системе №2. Для работы системы №2 достаточно реквизитов:

·       Наименование контрагента

·       Телефоны

        Опишите формат обмена через api в виде структуры json.

### Решение

``` Json
{
  "контрагенты": [
    {
      "наименование": "Наименование контрагента 1",
      "телефоны": [
        "телефон1",
        "телефон2"
      ]
    },
    {
      "наименование": "Наименование контрагента 2",
      "телефоны": [
        "телефон3",
        "телефон4"
      ]
    },
    {
      "наименование": "Наименование контрагента 3",
      "телефоны": [
        "телефон5"
      ]
    }
  ]
}
```


# Процессы

## Задача №3
Нарисуйте схему процесса оформления заказа на сайте [dns-shop.ru](https://www.google.com/url?q=https://www.google.com/url?q%3Dhttps://www.vseinstrumenti.ru/%26amp;sa%3DD%26amp;source%3Deditors%26amp;ust%3D1633596438416000%26amp;usg%3DAOvVaw043RlZVpyDK167EjNZtS8K&sa=D&source=editors&ust=1633596438635000&usg=AOvVaw3Gsf6v4VmzaduLb8EN3vkc) в любом удобном для Вас и понятном виде

### Решение

Схема bpmn дополнительно продублирована в отдельном файле my-dns.bpmn

![[Pasted image 20231120163518.png]]

# Программная аналитика
## **Задача №4**

Дайте ответ, что вернет функция getAnswer, если ей передать в качестве аргумента число 70:

![[Pasted image 20231120163707.png]]

### Ответ: 73

# Задача 5

Почему кнопка “Создать заявку на оплату” недоступна?

## Решение 
К сожалению, не знаю PHP на таком уровне
Но рискну предположить, что значение attb неравно 64.
Также крайне смущает факт того, что значение в HTML в двойных кавычках, а в коде PHP в одинарных. ''
# Запросы к базе данных

## Задача №6

Требуется создать новый справочник “Контрагенты”. Заказчику нужно хранить в этом справочнике ФИО клиента и его телефоны. Опишите структуру справочника в базе данных.

### Решение

``` SQL
-- PostgreSQL-specific SQL query  
-- Owner Postgres  
-- Shema public
CREATE TABLE contractors (
                             id SERIAL PRIMARY KEY,
                             first_name VARCHAR(50) NOT NULL,
                             last_name VARCHAR(50) NOT NULL,
                             patronymic VARCHAR(50),
                             phone_numbers VARCHAR(20)[]  
);
```


## Задача №7

Дано:

Таблица контрагентов (физических лиц) vseins_pcab_contragents

|   |   |   |
|---|---|---|
|Наименование поля|Тип|Содержимое|
|id|**int**(11)|id записи|
|email|**varchar**(100)|email контрагента|
|password|**varchar**(50)|Пароль контрагента|
|firstName|**varchar**(50)|имя|
|lastName|**varchar**(50)|фамилия|
|patronymic|**varchar(**50**)**|отчество|
|addDate|**datetime**|дата создания|

Таблица юридических лиц vseins_pcab_juristic_persons

|   |   |   |
|---|---|---|
|Наименование поля|Тип|Содержимое|
|id|**int**(11)|id записи|
|type_jur|**enum**(**'ur'**, **'ip'**)|тип юр лица|
|name|**varchar**(255)|Наименование организации|
|INN|**varchar**(12)|ИНН|
|KPP|**varchar**(20)|КПП|
|addDate|**datetime**|дата создания|

Таблица связи vseins_pcab_person_link

|                   |             |                      |
| ----------------- | ----------- | -------------------- |
| Наименование поля | Тип         | Содержимое           |
| id                | **int**(11) | id записи            |
| person_id         | **int**(11) | id юридического лица |
| contragent_id     | **int**(11) | id физического лица  |
|                   |             |                      |

### Решение 

``` SQL
-- PostgreSQL-specific SQL query  
-- Owner Postgres  
-- Shema public
CREATE TABLE IF NOT EXISTS public.vseins_pcab_contragents  
(
    id int PRIMARY KEY,
    email VARCHAR(100),
    password VARCHAR(50),
    firstName VARCHAR(50),
    lastName VARCHAR(50),
    patronymic VARCHAR(50),
    addDate timestamp
) TABLESPACE pg_default;  
  
  
  
ALTER TABLE IF EXISTS public.vseins_pcab_contragents
    OWNER to postgres;  
  
CREATE TYPE type_jur AS ENUM ('ur', 'ip');  
  
CREATE TABLE IF NOT EXISTS vseins_pcab_juristic_persons (
                                                            id INT PRIMARY KEY,
                                                            type_jur type_jur,
                                                            name VARCHAR(255),
                                                            INN VARCHAR(12),
                                                            KPP VARCHAR(20),
                                                            addDate timestamp
)
    TABLESPACE pg_default;  
ALTER TABLE IF EXISTS public.vseins_pcab_juristic_persons
    OWNER to postgres;  
  
  
CREATE TABLE IF NOT EXISTS vseins_pcab_person_link(
                                                      id int PRIMARY KEY,
                                                      person_id int,
                                                      contragent_id int
) TABLESPACE pg_default;;  
  
ALTER TABLE IF EXISTS public.vseins_pcab_person_link
    OWNER to postgres;
```


##  Задача 8.1

**8.1**  Напишите SQL-запросы:

·       Найти всех юридических лиц с ИНН 1111111111 и вывести наименование организаций и тип юридического лица

·       Вывести первых 200 фамилий из базы данных, которые отсортированы по алфавиту

### Решение

``` SQL
select name, type_jur FROM vseins_pcab_juristic_persons where INN = '1111111111';  
  
select lastName from vseins_pcab_contragents ORDER BY lastName asc  
LIMIT 200;
```
asc – можно убрать так, как это формат по умолчанию

## Задача 8.2

**8.2*** Напишите SQL-запросы:  

·       Рассчитать количество контрагентов физических лиц без привязки юридического лица, созданных до 1 мая 2020

·       Рассчитать количество контрагентов физических лиц с привязкой юридического лица с типом ИП, созданных до 1 мая 2020

``` SQL

SELECT COUNT(*)  
FROM vseins_pcab_contragents         LEFT JOIN vseins_pcab_person_link ON vseins_pcab_contragents.id = vseins_pcab_person_link.contragent_id  
WHERE vseins_pcab_person_link.person_id IS NULL  
  AND addDate < '2020-05-01';  
  
  
  
SELECT COUNT(*)  
FROM vseins_pcab_contragents         INNER JOIN  vseins_pcab_person_link ON vseins_pcab_contragents.id = vseins_pcab_person_link.contragent_id         INNER JOIN vseins_pcab_juristic_persons ON vseins_pcab_person_link.person_id = vseins_pcab_juristic_persons.id  
WHERE vseins_pcab_juristic_persons.type_jur = 'ip';
```